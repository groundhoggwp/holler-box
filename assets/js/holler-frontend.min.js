!function(window,document,$,undefined){var holler={};function hollerGetUrlParameter(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex,results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}holler.init=function(){holler.newVisitor=!1,holler.checkForPreview()},Date.now||(Date.now=function now(){return(new Date).getTime()}),holler.checkForPreview=function(){if(hollerGetUrlParameter("hwp_preview")){var id=hollerGetUrlParameter("hwp_preview");return holler.showNote(id),void holler.noteListeners(id)}holler.checkCookie(),window.hollerVars.active&&holler.doActive(window.hollerVars.active)},holler.checkCookie=function(){""===holler.getCookie("hwp_visit")?(holler.setCookie("hwp_visit",Date.now(),parseInt(window.hollerVars.expires)),holler.setCookie("hwp_new","true",1),holler.newVisitor=!0):""!=holler.getCookie("hwp_new")&&(holler.newVisitor=!0)},holler.doActive=function(ids){for(var i=0;i<ids.length;i++)holler.doChecks(ids[i])},holler.doChecks=function(id,forceShow){var item;if(document.getElementById("hwp-"+id)){var vars=window.hollerVars[id];if(vars.visitor&&("new"!==vars.visitor||1==holler.newVisitor)&&("returning"!==vars.visitor||0==holler.newVisitor)&&("interacts"!==vars.showSettings||""==holler.getCookie("hwp_"+id+"_int"))&&(console.log(vars,window.hollerVars),(holler.mobileCheck()||"mobile_only"!==vars.devices)&&(!holler.mobileCheck()||"desktop_only"!==vars.devices))){var shown=holler.getCookie("hwp_"+id+"_shown");if("hide_for"!==vars.showSettings||"true"!==shown||forceShow){if("exit"===vars.display_when){if("true"===holler.getCookie("hwp-"+id+"_hide"))return;$("body").on("mouseleave",holler.mouseExit)}if("scroll"!=vars.display_when){if("exit"===vars.display_when&&!forceShow||"link"===vars.display_when&&!forceShow)return;var delay="delay"===vars.display_when?parseInt(vars.delay):0;if("hwp-popup"===vars.type&&"always"===vars.showSettings)holler.setCookie("hwp-"+id+"_hide","",-1);else if("hwp-popup"===vars.type&&"interacts"===vars.showSettings&&"true"===holler.getCookie("hwp-"+id+"_hide"))return;setTimeout((function(){holler.showNote(id),holler.countNoteShown(id)}),1e3*delay)}else holler.detectScroll(id)}}}},holler.mobileCheck=function(){console.log("mobile check");let check=!1;var a;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),console.log("Mobile check",check),check},holler.noteListeners=function(id){$("body").on("click",".hwp-close",holler.hideItem).on("click",".hwp-floating-btn",holler.btnClick).on("click",".hwp-text i",holler.sendText).on("click","#hwp-"+id+" .hwp-email-btn",holler.emailSubmitClick).on("click",".hwp-backdrop",holler.bdClick),$(".hwp-text-input").on("keypress",holler.submitChatTextOnEnter),$("#hwp-"+id+" .hwp-email-input").on("keypress",holler.submitEmailOnEnter),$("#hwp-"+id+" a").on("click",holler.interactionLink)},holler.detectScroll=function(id){$(window).scroll(holler.debounce((function(){var wintop,docheight,winheight,scrolltrigger=.5;$(window).scrollTop()/($(document).height()-$(window).height())>.5&&!holler.show["hwp-"+id]&&(holler.showNote(id),holler.show["hwp-"+id]=!0,holler.countNoteShown(id))}),250))},holler.showNote=function(id){var options=window.hollerVars[id],item=document.getElementById("hwp-"+id);"hwp-popup"===options.type&&$(item).hasClass("hwp-show")?holler.transitionOut($("#hwp-bd-"+id)):"hwp-popup"===options.type&&holler.transitionIn($("#hwp-bd-"+id)),"true"===holler.getCookie("hwp-"+id+"_hide")?(holler.transitionOut(item),"always"===options.showSettings&&("1"!==options.hideBtn&&"holler-banner"!=options.type&&"footer-bar"!=options.type||holler.setCookie("hwp-"+id+"_hide","",-1)),("1"!=options.hideBtn&&"holler-banner"!=options.type||"holler-banner"==options.type&&"always"===options.showSettings)&&holler.transitionIn($(".hwp-btn-"+id))):("fomo"===options.type&&options.fomoLoopTimes?holler.fomoLoopStart(id,item,options.fomoLoopTimes,1):"fomo"===options.type?holler.fomoContent(id,item):holler.transitionIn(item),"1"!=options.hideBtn&&"holler-banner"!=options.type&&holler.transitionOut($(".hwp-btn-"+id)),"1"===options.showEmail&&"1"!=options.showChat&&holler.showEmailSubmit(id),"1"===options.showChat&&holler.transitionIn(document.querySelector("#hwp-"+id+" .hwp-chat"))),"1"===options.hideBtn&&holler.hide($(".hwp-btn-"+id)),"holler-banner"===options.type&&"true"!=holler.getCookie("hwp-"+id+"_hide")&&holler.toggleBnrMargin(id),"delay"!==options.hide_after||options.fomoDisplayTime||setTimeout((function(){holler.transitionOut(item)}),1e3*parseInt(options.hide_after_delay))},holler.setCookie=function(cname,cvalue,exdays,path){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();return path||(path="/"),document.cookie=cname+"="+cvalue+";"+expires+";path="+path,cvalue},holler.getCookie=function(cname){for(var name=cname+"=",decodedCookie,ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},holler.debounce=function(fn,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout((function(){fn.apply(context,args)}),delay)}},holler.toggleBnrMargin=function(id,hide){if($("body").css("padding-top",""),!hide){var height=$("#hwp-"+id).outerHeight();$("body").css("padding-top",height)}},holler.hideItem=function(e){e.stopImmediatePropagation();var closest=$(e.target).closest(".holler-box"),id=closest.attr("id").split("-")[1];return holler.toggleHide(id),closest.hasClass("holler-banner")&&holler.toggleBnrMargin(id,!0),!1},holler.btnClick=function(e){e.stopImmediatePropagation();var id=$(this).data("id");holler.toggleHide(id)},holler.toggleHide=function(id){var hide=holler.getCookie("hwp-"+id+"_hide");console.log("hide "+id,hide),"true"===hide?holler.setCookie("hwp-"+id+"_hide","true",-1):holler.setCookie("hwp-"+id+"_hide","true",1),holler.showNote(id)},holler.transitionIn=function(item){$(item).css("display","block"),setTimeout((function(){$(item).addClass("hwp-transition-in").removeClass("hwp-hide")}),1),setTimeout((function(){$(item).removeClass("hwp-transition-in").addClass("hwp-show")}),300)},holler.transitionOut=function(item){$(item).addClass("hwp-transition-out").removeClass("hwp-show"),setTimeout((function(){$(item).removeClass("hwp-transition-out").addClass("hwp-hide"),$(item).css("display","")}),200)},holler.show=function(item){item.style.display="block",$(item).removeClass("hwp-hide").addClass("hwp-show")},holler.hide=function(item){$(item).removeClass("hwp-show").addClass("hwp-hide"),$(item).css("display","")},holler.checkExistingMsg=function(){var msg=window.localStorage.getItem("hwp-full-msg");if(msg&&""!=msg){for(var msgs=msg.split("/n"),i=0;i<msgs.length;i++)$("#"+holler.activeID+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+msgs[i]+"</div>");holler.showEmailSubmit()}},holler.submitChatTextOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var id=$(e.target).closest(".holler-box").attr("id").split("-")[1];holler.submitText(e.target.value,id),e.target.value=""}},holler.submitEmailOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var id=$(e.target).closest(".holler-box").attr("id").split("-")[1];e.preventDefault(),holler.emailSubmitted(id)}},holler.sendText=function(e){e.stopImmediatePropagation();var id=$(e.target).closest(".holler-box").attr("id").split("-")[1],text=$("#hwp-"+id+" .hwp-text-input").val();text&&""!=text&&(holler.submitText(text,id),$("#hwp-"+id+" .hwp-text-input").val("").focus())},holler.submitText=function(text,id){var fullMsg=window.localStorage.getItem("hwp-full-msg");$("#hwp-"+id+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+text+"</div>"),fullMsg?fullMsg+="\n"+text:fullMsg=text,window.localStorage.setItem("hwp-full-msg",fullMsg),setTimeout((function(){holler.showEmailSubmit(id)}),5e3)},holler.showEmailSubmit=function(id){var emailRow=$("#hwp-"+id+" .hwp-email-row"),options=window.hollerVars[id],textInput;emailRow.hasClass("hwp-show")||(document.querySelector("#hwp-"+id+" .hwp-email-input").setAttribute("placeholder",options.placeholder),$(".hwp-away-msg").remove(),$("#hwp-"+id).addClass("has-optin"),emailRow.removeClass("hwp-hide").addClass("hwp-show"),emailRow.prepend('<span class="hwp-away-msg">'+options.optinMsg+"</span>"))},holler.emailSubmitClick=function(e){e.stopImmediatePropagation(),e.preventDefault();var id=$(e.target).closest(".holler-box").attr("id").split("-")[1];holler.emailSubmitted(id)},holler.emailSubmitted=function(id){var email=$("#hwp-"+id+" .hwp-email-input").val(),msg;if(!email)return msg=window.hollerVars.emailErr?window.hollerVars.emailErr:"Please enter your email.",void alert(msg+" err1");var name=$("#hwp-"+id+" .hwp-name").val(),title=$("#hwp-"+id+" .holler-title").text();if(-1!==email.indexOf("@")&&-1!==email.indexOf(".")){if(""==$("#hwp-"+id+" input[name=hwp_hp]").val())if("ck"!==window.hollerVars[id].emailProvider)if("mc"!==window.hollerVars[id].emailProvider)if("ac"!==window.hollerVars[id].emailProvider)if("mailpoet"!==window.hollerVars[id].emailProvider)if("drip"!==window.hollerVars[id].emailProvider){var fullMsg=window.localStorage.getItem("hwp-full-msg");holler.sendMsg(email,name,fullMsg,id,title)}else holler.dripSubscribe(email,id);else holler.mpSubscribe(email,id);else holler.acSubscribe(email,id);else holler.mcSubscribe(email,id);else holler.ckSubscribe(email,id)}else alert(window.hollerVars.emailErr+" err2")},holler.ckSubscribe=function(email,id){var options=window.hollerVars[id],formId,apiUrl="https://api.convertkit.com/v3/forms/"+$("#hwp-"+id+" .ck-form-id").val()+"/subscribe",name=$("#hwp-"+id+" .hwp-name").val();holler.showSpinner(id),$.ajax({method:"POST",url:apiUrl,data:{email:email,api_key:options.ckApi,first_name:name}}).done((function(msg){holler.showConfirmation(id),$("#hwp-"+id+" .hwp-email-row").hide(),holler.conversion(id)})).fail((function(err){holler.hideSpinner(),$("#hwp-"+id+" .hwp-email-row").prepend('<span id="hwp-err">There seems to be a problem, can you try again?</span>'),setTimeout((function(){$("#hwp-err").remove()}),3e3),console.log(err)}))},holler.mcSubscribe=function(email,id){var listId=$("#hwp-"+id+" .mc-list-id").val(),name=$("#hwp-"+id+" .hwp-name").val(),interestIds=$("#hwp-"+id+" .mc-interests").val();interestIds&&(interestIds=JSON.parse(interestIds)),listId?(holler.showSpinner(id),$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:{email:email,list_id:listId,action:"hwp_mc_subscribe",interests:interestIds,nonce:window.hollerVars.hwpNonce,name:name}}).done((function(msg){holler.showConfirmation(id),$("#hwp-"+id+" .hwp-email-row").hide(),holler.conversion(id)})).fail((function(err){console.log(err),holler.hideSpinner()}))):alert("MailChimp list ID is missing.")},holler.acSubscribe=function(email,id){var listId=$("#hwp-"+id+" .ac-list-id").val(),name=$("#hwp-"+id+" .hwp-name").val();listId?(holler.showSpinner(id),$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:{email:email,list_id:listId,action:"hwp_ac_subscribe",nonce:window.hollerVars.hwpNonce,name:name}}).done((function(msg){1==msg.success?(holler.showConfirmation(id),$("#hwp-"+id+" .hwp-email-row").hide(),holler.conversion(id)):(console.warn(msg),$("#hwp-"+id+" .hwp-first-row").html("<p>"+msg.data+"</p>"),holler.hideSpinner())})).fail((function(err){console.warn(err),holler.hideSpinner()}))):alert("List ID is missing.")},holler.dripSubscribe=function(email,id){if(window._dcq){var tags=$("#hwp-"+id+" .drip-tags").val(),name=$("#hwp-"+id+" .hwp-name").val(),tagArr=tags.split(",");holler.showSpinner(id),holler.dripid=id;var response=_dcq.push(["identify",{email:email,first_name:name,tags:tagArr,success:holler.dripResponse,failure:holler.dripResponse}])}else alert("Drip code not installed properly.")},holler.dripResponse=function(response){holler.hideSpinner(),1==response.success?(holler.showConfirmation(holler.dripid),$("#hwp-"+holler.dripid+" .hwp-email-row").hide(),holler.conversion(holler.dripid)):(console.warn(response),$("#hwp-"+holler.dripid+" .hwp-first-row").html("<p>"+response.error+"</p>"))},holler.mpSubscribe=function(email,id){var listId=$("#hwp-"+id+" .mailpoet-list-id").val();if(listId){var name=$("#hwp-"+id+" .hwp-name").val();holler.showSpinner(id),$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:{email:email,list_id:listId,action:"hwp_mailpoet_subscribe",nonce:window.hollerVars.hwpNonce,name:name}}).done((function(msg){holler.showConfirmation(id),$("#hwp-"+id+" .hwp-email-row").hide(),holler.conversion(id)})).fail((function(err){console.log(err),holler.hideSpinner()}))}else alert("List ID is missing.")},holler.sendMsg=function(email,name,msg,id,title){holler.showSpinner(id),$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:{email:email,name:name,id:id,msg:msg,action:"hwp_send_email",nonce:window.hollerVars.hwpNonce,title:title}}).done((function(msg){holler.clearChat(id),holler.showConfirmation(id),holler.conversion(id)})).fail((function(err){console.log(err),holler.hideSpinner()}))},holler.clearChat=function(id){$("#hwp-"+id+" .hwp-chat").hasClass("hwp-hide")||(window.localStorage.removeItem("hwp-full-msg"),$("#hwp-"+id+" .hwp-visitor-row, #hwp-"+id+" .hwp-away-msg").remove()),holler.hide($("#hwp-"+id+" .hwp-email-row"))},holler.interactionLink=function(e){if("http://hollerwp.com/"!==e.target.href){var id=$(e.target).closest(".holler-box").attr("id").split("-")[1];holler.conversion(id)}},holler.conversion=function(id){var params={action:"hwp_track_event",nonce:window.hollerVars.hwpNonce,id:id};$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:params}).done((function(msg){var redirect=window.hollerVars[id].redirect;redirect&&($("#hwp-"+id+" .hwp-first-row").append(' Redirecting... <img src="'+window.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />'),setTimeout((function(){window.location.href=redirect}),1e3))})).fail((function(err){console.log(err)})),holler.setCookie("hwp_"+id+"_int","true",1)},holler.showConfirmation=function(id){holler.hideSpinner();var options=window.hollerVars[id],msg=""!=options.confirmMsg?options.confirmMsg:"Thanks!";"holler-banner"===options.type?($("#hwp-"+id+" .hwp-box-rows").addClass("hwp-full-width").html(msg),holler.toggleBnrMargin(id)):$("#hwp-"+id+" .hwp-first-row").html(msg),"1"===options.showChat&&holler.clearChat(id)},holler.countNoteShown=function(id){holler.noteListeners(id);var options=window.hollerVars[id],hideFor=options.hideForDays?parseInt(options.hideForDays):1;if(holler.setCookie("hwp_"+id+"_shown","true",hideFor),"1"!==window.hollerVars.disable_tracking){var params={action:"hwp_track_view",nonce:window.hollerVars.hwpNonce,id:id};$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:params}).done((function(msg){})).fail((function(err){}))}},holler.showSpinner=function(id){$("#hwp-"+id+" .hwp-email-row").html('<img src="'+window.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />'),$("#hwp-"+id+" .hwp-name-row").hide()},holler.hideSpinner=function(){$("img.hwp-loading").remove()},holler.bdClick=function(e){e.stopImmediatePropagation();var id=$(e.currentTarget).data("id");holler.toggleHide(id)},holler.mouseExit=function(e){var el=$(".holler-box.hwp-show-on-exit")[0];if(el&&!$(el).hasClass("hwp-show")){var id=el.id.split("-")[1];holler.doChecks(id,!0)}},holler.fomoLoopStart=function(id,item,times,i){var options=window.hollerVars[id],loopDelay=options.fomoLoopDelay?1e3*parseInt(options.fomoLoopDelay):7e3,displayTime=options.fomoDisplayTime?1e3*parseInt(options.fomoDisplayTime):3e3;holler.fomoContent(id,item),holler.fomoDisplayTime(displayTime).then((function(){holler.transitionOut(item),holler.fomoLoop(id,item,times,i,loopDelay)}))},holler.fomoDisplayTime=function(displayTime){return new Promise((function(resolve){setTimeout((function(){resolve()}),displayTime)}))},holler.fomoLoop=function(id,item,times,i,loopDelay){setTimeout((function(){++i<parseInt(times)+1&&holler.fomoLoopStart(id,item,times,i)}),loopDelay)},holler.fomoContent=function(id,item){var int;int=(int=holler.getCookie("hwp_fomo"))&&int>0?parseInt(int)+1:1;var params={action:"hwp_fomo_ajax",nonce:window.hollerVars.hwpNonce,int:int,id:id};$.ajax({method:"GET",url:window.hollerVars.ajaxurl,data:params}).done((function(data){data.data?($("#hwp-"+id+" .hwp-first-row").html(data.data),holler.transitionIn(item),$("#hwp-"+id+" a").on("click",holler.interactionLink),parseInt(int)>10&&(int=1),holler.setCookie("hwp_fomo",int,1)):holler.setCookie("hwp_fomo",0,1)})).fail((function(err){holler.setCookie("hwp_fomo",1,1),console.log(err)}))},$(window).on("load",(function(){holler.init()})),window.hollerbox=holler}(window,document,jQuery);