(()=>{const Cookies={MINUTE_IN_SECONDS:60,HOUR_IN_SECONDS:this.MINUTE_IN_SECONDS*60,DAY_IN_SECONDS:this.HOUR_IN_SECONDS*24,WEEK_IN_SECONDS:this.DAY_IN_SECONDS*7,MONTH_IN_SECONDS:this.DAY_IN_SECONDS*30,closedPopups:"holler-closed-popups",popupConversions:"holler-popup-conversions",popupViews:"holler-popup-views",pageViews:"holler-page-views",sessions:"holler-sessions",addClosedPopup(id){let allClosed=this.getCookie(this.closedPopups,"").split(",");allClosed.push(id);this.setCookie(this.closedPopups,allClosed.join(),this.MONTH_IN_SECONDS)},isClosed(id){let allClosed=this.getCookie(this.closedPopups,"").split(",").map(id=>parseInt(id));return allClosed.includes(id)},addPopupCount(cookie,id){let counts=JSON.parse(this.getCookie(cookie,"{}"));if(!counts){counts={}}if(counts[id]){counts[id]+=1}else{counts[id]=1}this.setCookie(cookie,JSON.stringify(counts),this.DAY_IN_SECONDS)},getPopupCount(cookie,id){let counts=JSON.parse(this.getCookie(cookie,"{}"));return parseInt(counts[id]??0)},addPopupConversion(id){this.addPopupCount(this.popupConversions,id)},getPopupConversions(id){return this.getPopupCount(this.popupConversions,id)},addPopupView(id){this.addPopupCount(this.popupViews,id)},getPopupViews(id){return this.getPopupCount(this.popupViews,id)},addPageView(){this.setCookie(this.pageViews,this.getPageViews()+1,this.DAY_IN_SECONDS)},getPageViews(){return parseInt(this.getCookie(this.pageViews,0))},setCookie(name,value,duration){if(isBuilderPreview()){return}let d=new Date;d.setTime(d.getTime()+duration*1e3);let expires="expires="+d.toUTCString();document.cookie=name+"="+value+";"+expires+";path=/"},getCookie(cname,_default=null){let name=cname+"=";let ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return _default},getSessions(){let obj=JSON.parse(this.getCookie(this.sessions,"{}"));return parseInt(obj.sessions||0)},maybeAddSession(){let obj=JSON.parse(this.getCookie(this.sessions,"{}"));let lastSession=new Date(obj.lastSession);lastSession.setDate(lastSession.getDate()+1);let now=new Date;if(now>lastSession){this.setCookie(this.sessions,JSON.stringify({sessions:parseInt(obj.sessions)+1,lastSession:now.toString()}),Cookies.MONTH_IN_SECONDS)}},hasAccepted(){if(!HollerBox.settings.cookie_compliance){return true}let{cookie_name:cookie_name="",cookie_value:cookie_value=""}=HollerBox.settings;return this.getCookie(cookie_name)===cookie_value}};function ApiError(message){this.name="ApiError";this.message=message}ApiError.prototype=Error.prototype;async function apiPost(url="",data={},opts={}){const response=await fetch(url,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":HollerBox.nonces._wprest},body:JSON.stringify(data),...opts});let json=await response.json();if(!response.ok){throw new ApiError(json.message)}return json}const maybeLog=error=>{if(HollerBox.settings?.script_debug_mode){console.debug(error)}};const overlay=()=>{return`
        <div class="holler-box-overlay"></div>`};const closeButton=()=>{return`
        <button class="holler-box-modal-close">&times;</button>`};const credit=()=>{if(HollerBox.settings?.credit_disabled){return""}return`
        <div class="holler-box-credit"><a href="https://hollerwp.com/">âš¡ by HollerBox</a></div>`};const createHTML=HTML=>{let div=document.createElement("div");div.innerHTML=HTML;return div.firstElementChild};const gdprInput=()=>{const HTML=createHTML(HollerBox.settings.gdpr_text);return`<label class="holler-gdpr-consent"><input type="checkbox" name="gdpr_consent" value="yes" required>
        <span>${HTML.innerHTML}</span></label>`};const nameInput=(placeholder="Your name")=>{return`<input class="holler-box-input" type="text" name="name" placeholder="${placeholder}" required>`};const emailInput=(placeholder="Your email")=>{return`<input class="holler-box-input" type="email" name="email" placeholder="${placeholder}" required>`};const submitButton=(text,type="submit")=>{return`
        <button type="${type}" class="holler-box-button">${text}</button>`};const __title=title=>{return`
        <h2 class="holler-box-modal-title">${title}</h2>
    `};const __content=content=>{return`
        <div class="holler-box-modal-content">
            ${content}
        </div>
    `};const __chatResponse=content=>{return`
        <div class="holler-box-chat-response">
            <div class="content">
                ${content}
            </div>
        </div>
    `};const __chatMessage=({content,avatar})=>{content=`<div class="content">${content}</div>`;return`
        <div class="holler-box-chat-message">
            <img src="${avatar}" class="avatar" alt="">
            ${content}
        </div>
    `};const notificationClosedTemplate=({id,position})=>{return`
        <div id="${id}" class="holler-box holler-notification-box">
            <div class="positioner ${position}">
                <div class="animation slide-in">
                    <div class="holler-box-modal notification-closed">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <rect width="107.6" height="145.6" x="319.1" y="76.6" fill="#fff" rx="5" ry="5"/>
                            <path fill="#f44336"
                                  d="M373 0a139 139 0 1 0 1 278 139 139 0 0 0-1-278zm22 187a16 16 0 0 1-32 0v-70h-11a16 16 0 0 1 0-32h27c8 0 16 8 16 16zm0 0"/>
                            <path fill="#ffa000" d="M299 427a85 85 0 1 1-171 0 85 85 0 0 1 171 0zm0 0"/>
                            <path fill="#ffc107"
                                  d="M380 320h-7A182 182 0 0 1 220 43h-7c-82 0-149 67-149 149v59c0 43-18 83-51 110a37 37 0 0 0 24 66h352a37 37 0 0 0 24-66c-13-12-24-26-33-41zm0 0"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>`};const SubmitActions={close:popup=>{popup.close()},redirect:popup=>{let{redirect_url:redirect_url=""}=popup;let url=new URL(redirect_url);let home=new URL(HollerBox.home_url);if(isBuilderPreview()){if(url.hostname!==home.hostname){popup.close();return}url.searchParams.append("suppress_hollerbox",1)}window.open(url,"_self")},message:popup=>{popup.open()}};function sanitizeTextField(string){const map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};const reg=/[&<>"'/]/gi;return string.replace(reg,match=>map[match])}const CommonActions={maybeDisableScrolling:popup=>{if(popup.disable_scrolling){document.body.classList.add("disable-scrolling")}},enableScrolling:()=>{document.body.classList.remove("disable-scrolling")},notificationClosed:popup=>{popup.closed=true;popup.open()},notificationOpened:popup=>{if(popup.closed){document.getElementById(popup.id).addEventListener("click",e=>{popup.close().then(()=>{popup.closed=false;popup.open()})})}},formSubmitted:popup=>{const{id,after_submit:after_submit="close"}=popup;document.querySelector(`#${id} form.holler-box-form`).addEventListener("submit",e=>{e.preventDefault();let form=e.target;let formData=new FormData(form);formData.append("location",window.location.href);formData.append("referer",document.referrer);form.querySelectorAll("input, button").forEach(el=>el.disabled=true);form.querySelector("button").innerHTML='<span class="holler-spinner"></span>';const submit=()=>apiPost(`${HollerBox.routes.submit}/${popup.ID}`,Object.fromEntries(formData)).then(({status:status="success",failures:failures=[]})=>{if(status==="failed"){if(!failures.length){alert("Something when wrong, please try again later.");popup.close();return}console.log(failures);popup.querySelector("form").innerHTML=[`<div class="hollerbox-integration-errors">`,`<p>There are issues with some of your integrations:</p>`,`<ul>`,...failures.map(f=>`<li>${f}</li>`),`</ul>`,`<p>Only admins see this message.</p>`,`</div>`].join("");return}popup.submitted=true;popup.converted(false);SubmitActions[after_submit](popup);document.dispatchEvent(new CustomEvent("holler_submit",{formData:formData,form:form}))}).catch(e=>{alert(e.message);console.log(e);popup.close()});submit()})},buttonClicked:popup=>{const{id,button_link}=popup;let button=document.querySelector(`#${id} button.holler-box-button`);button.addEventListener("click",e=>{e.preventDefault();button.innerHTML='<span class="holler-spinner"></span>';popup.converted().then(()=>{window.open(button_link,"_self")})})}};const isGDPREnabled=()=>{return HollerBox.settings?.gdpr_enabled??false};const form=({email:email=true,name:name=true,direction:direction="vertical",email_placeholder:email_placeholder="Name",name_placeholder:name_placeholder="Email",button_text:button_text="Subscribe"})=>{return`
        <form class="holler-box-form ${direction} ${isGDPREnabled()?"has-gdpr":""}">
            <div class="fields">
                ${name?nameInput(name_placeholder):""}
                ${email?emailInput(email_placeholder):""}
                ${direction==="vertical"&&isGDPREnabled()?gdprInput():""}
                ${submitButton(button_text)}
            </div>
            ${direction==="horizontal"&&isGDPREnabled()?gdprInput():""}
        </form>`};const PopupTemplates={notification_box:{render:({id:id="",position:position="bottom-right",post_content:post_content="",avatar:avatar="",closed:closed=false})=>{if(closed){return notificationClosedTemplate({id:id,position:position})}return`
            <div id="${id}" class="holler-box holler-notification-box">
                <div class="positioner ${position}">
                    <div class="animation slide-in">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            <div class="display-flex">
                                <img src="${avatar}" alt="">
                                ${__content(post_content)}
                            </div>
                            ${credit()}
                        </div>
                    </div>
                </div>
            </div>`},onOpen:CommonActions.notificationOpened,onClosed:CommonActions.notificationClosed},notification_box_with_button:{render:({id:id="",position:position="bottom-right",post_content:post_content="",avatar:avatar="",button_text:button_text="",closed:closed=false})=>{if(closed){return notificationClosedTemplate({id:id,position:position})}return`
            <div id="${id}" class="holler-box holler-notification-box with-button">
                <div class="positioner ${position}">
                    <div class="animation slide-in">
                        <div class="holler-box-modal ">
                            ${closeButton()}
                            <div class="display-flex">
                                <img src="${avatar}" alt="">
                                ${__content(post_content)}
                            </div>
                            <div class="holler-button-cta">
                                ${submitButton(button_text,"button")}
                            </div>
                            ${credit()}
                        </div>
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.notificationOpened(popup);CommonActions.buttonClicked(popup)},onClosed:CommonActions.notificationClosed},notification_box_with_form:{render:({id:id="",position:position="bottom-right",post_content:post_content="",avatar:avatar="",button_text:button_text="Signup",email_placeholder:email_placeholder="Email",success_message:success_message="",closed:closed=false,submitted:submitted=false})=>{if(closed){return notificationClosedTemplate({id:id,position:position})}return`
            <div id="${id}" class="holler-box holler-notification-box with-form ${submitted?"no-animation":""}">
                <div class="positioner ${position}">
                    <div class="animation slide-in">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            <div class="display-flex">
                                <img src="${avatar}" alt="">
                                ${__content(submitted?success_message:post_content)}
                            </div>
                            ${submitted?"":form({direction:"horizontal",name:false,button_text:button_text,email_placeholder:email_placeholder})}
                            ${credit()}
                        </div>
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.notificationOpened(popup);CommonActions.formSubmitted(popup)},onClosed:CommonActions.notificationClosed},fake_chat:{render:popup=>{const{id:id="",position:position="bottom-right",post_content:post_content="",avatar:avatar="",button_text:button_text="",message_placeholder:message_placeholder="Type your message",state:state="message",closed:closed=false,doAnimations:doAnimations=true}=popup;if(closed){return`
              <div id="${id}" class="holler-box holler-notification-box">
                  <div class="positioner ${position}">
                      <div class="animation slide-in">
                          <div class="holler-box-modal notification-closed">
                              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                  <path fill="#fff" d="M303.4 61.4A207 207 0 0 0 195 31C89 31 0 110 0 211a169 169 0 0 0 32 98.7L2.6 401.4a15 15 0 0 0 21.1 18l88.8-45.2c3.6 1.6 7.3 3 11 4.3A198.2 198.2 0 0 1 92 271c0-114.9 96.7-203.2 211.4-209.6z"/>
                                  <path fill="#fff" d="M480 369.7a169 169 0 0 0 32-98.7c0-101.1-89-180-195-180s-195 79-195 180c0 101.1 89 180 195 180 28.4 0 56.7-5.8 82.4-16.8l88.8 45.2a15 15 0 0 0 21-18zM256 286a15 15 0 1 1 0-30 15 15 0 0 1 0 30zm60 0a15 15 0 1 1 0-30 15 15 0 0 1 0 30zm60 0a15 15 0 1 1 0-30 15 15 0 0 1 0 30z"/>
                              </svg>
                          </div>
                      </div>
                  </div>
              </div>`}if(!popup.messages){popup.messages=[]}if(!popup.messages.length){popup.messages.push(__chatMessage({avatar:avatar,content:post_content}))}let input;switch(state){default:case"message":case"message_2":input=`<textarea rows="1" name="message" placeholder="${message_placeholder}"
                               class="holler-box-input" required></textarea>`;break;case"name":input=nameInput();break;case"email":input=emailInput();break}if(state==="done"){return`
              <div id="${id}" class="holler-box holler-notification-box with-chat">
                  <div class="positioner ${position}">
                      <div class="animation ${doAnimations?"slide-in":""}">
                          <div class="holler-box-modal ">
                              ${closeButton()}
                              ${popup.messages.join("")}
                              <div class="close-chat-wrap">
                                  <button class="close-chat">&times; Close chat</button>
                              </div>
                              ${credit()}
                          </div>
                      </div>
                  </div>
              </div>`}return`
            <div id="${id}" class="holler-box holler-notification-box with-chat">
                <div class="positioner ${position}">
                    <div class="animation ${doAnimations?"slide-in":""}">
                        <div class="holler-box-modal ">
                            ${closeButton()}
                            ${popup.messages.join("")}
                            <form class="holler-chat-form">
                                ${input}
                                <button type="submit" class="send-message">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 404.644 404.644">
                                        <path fill="currentColor"
                                              d="M5.535 386.177c-3.325 15.279 8.406 21.747 19.291 16.867l367.885-188.638h.037c4.388-2.475 6.936-6.935 6.936-12.08 0-5.148-2.548-9.611-6.936-12.085h-.037L24.826 1.6C13.941-3.281 2.21 3.189 5.535 18.469c.225 1.035 21.974 97.914 33.799 150.603l192.042 33.253-192.042 33.249C27.509 288.26 5.759 385.141 5.535 386.177z"/>
                                    </svg>
                                </button>
                            </form>
                            ${credit()}
                        </div>
                    </div>
                </div>
            </div>`},beforeOpen:popup=>{if(!popup.state){popup.state="message"}if(!popup.responses){popup.responses={}}if(!popup.messages){popup.messages=[]}},onOpen:popup=>{if(popup.closed){return CommonActions.notificationOpened(popup)}let modal=popup.querySelector(".holler-box-modal");modal.scrollTop=modal.scrollHeight;const form=document.querySelector(`#${popup.id} form.holler-chat-form`);if(popup.state!=="message"){document.querySelector(`#${popup.id} .holler-box-input`)?.focus()}if(["message","more"].includes(popup.state)){document.querySelector(`#${popup.id} .holler-box-input`).addEventListener("keydown",e=>{if(e.key==="Enter"&&!e.shiftKey){form.dispatchEvent(new Event("submit"))}})}if(popup.state==="done"){document.querySelector(`#${popup.id} .close-chat`).addEventListener("click",()=>{popup.close()})}if(!form){return}form.addEventListener("submit",e=>{e.preventDefault();let fd=new FormData(e.target);switch(popup.state){default:case"message":let message=sanitizeTextField(fd.get("message"));popup.responses.message=message;popup.messages.push(__chatResponse(message));popup.messages.push(__chatMessage({content:popup.name_prompt??"<p>What is your name?</p>",avatar:popup.avatar}));popup.state="name";break;case"name":let name=sanitizeTextField(fd.get("name"));popup.responses.name=name;popup.messages.push(__chatResponse(name));popup.messages.push(__chatMessage({content:popup.email_prompt??"<p>What is your best email address?</p>",avatar:popup.avatar}));popup.state="email";break;case"email":popup.responses.email=fd.get("email");popup.messages.push(__chatResponse(fd.get("email")));popup.messages.push(__chatMessage({content:popup.message_prompt??"<p>Thanks for providing that information!</p><p>Can you please describe your needs in more detail?</p>",avatar:popup.avatar}));popup.state="more";break;case"more":let message2="\n\n"+sanitizeTextField(fd.get("message"));popup.responses.message+=message2;popup.messages.push(__chatResponse(message2));popup.state="done";apiPost(`${HollerBox.routes.submit}/${popup.ID}`,popup.responses).then(r=>{popup.submitted=true;popup.converted(false);document.dispatchEvent(new CustomEvent("holler_submit",this.responses))}).then(()=>{switch(popup.after_submit){case"message":popup.messages.push(__chatMessage({content:popup.success_message,avatar:popup.avatar}));popup.open();break;case"close":popup.close();break;case"redirect":SubmitActions["redirect"](popup);break}}).catch(e=>maybeLog(e));break}popup.doAnimations=false;popup.open()})},onClosed:popup=>{CommonActions.notificationClosed(popup);popup.doAnimations=true}},popup_custom:{render:({id:id="",position:position="center-center",animation:animation="appear",post_content:post_content="",overlay_enabled:overlay_enabled=true})=>{return`
            <div id="${id}" class="holler-box holler-popup holler-popup-custom">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            ${__content(post_content)}
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:CommonActions.maybeDisableScrolling,onClosed:CommonActions.enableScrolling},popup_standard:{render:({id:id="",position:position="center-center",animation:animation="appear",post_content:post_content="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",submitted:submitted=false,success_message:success_message="",overlay_enabled:overlay_enabled=true})=>{return`
            <div id="${id}"
                 class="holler-box holler-popup holler-popup-standard ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            ${__content(submitted?success_message:post_content)}
                            ${submitted?"":form({direction:"vertical",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling},popup_image_left:{render:({id:id="",position:position="center-center",animation:animation="appear",title:title="",post_content:post_content="",image_src:image_src="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",submitted:submitted=false,success_message:success_message="",overlay_enabled:overlay_enabled=true})=>{return`
            <div id="${id}"
                 class="holler-box holler-popup holler-popup-image-left ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            <div class="display-flex">
                                <div class="left image-width" style="background-image: url('${image_src}')">
                                </div>
                                <div class="right">
                                    ${__content(submitted?success_message:post_content)}
                                    ${submitted?"":form({direction:"vertical",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                                </div>
                            </div>
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling},popup_image_right:{render:({id:id="",position:position="center-center",animation:animation="appear",title:title="",post_content:post_content="",image_src:image_src="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",submitted:submitted=false,success_message:success_message="",overlay_enabled:overlay_enabled=true})=>{return`
            <div id="${id}"
                 class="holler-box holler-popup holler-popup-image-right ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            <div class="display-flex">
                                <div class="left">
                                    ${__content(submitted?success_message:post_content)}
                                    ${submitted?"":form({direction:"vertical",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                                </div>
                                <div class="right image-width" style="background-image: url('${image_src}')">
                                </div>
                            </div>
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling},popup_form_below:{render:({id:id="",position:position="center-center",animation:animation="appear",post_content:post_content="",image_src:image_src="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",overlay_enabled:overlay_enabled=true,submitted:submitted=false,success_message:success_message=""})=>{return`
            <div id="${id}"
                 class="holler-box holler-popup holler-popup-form-below ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            <div class="display-flex">
                                <div class="left">
                                    ${__content(submitted?success_message:post_content)}
                                </div>
                                <div class="right image-width" style="background-image: url('${image_src}')">
                                </div>
                            </div>
                            ${submitted?"":form({direction:"horizontal",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling},popup_progress_bar:{render:({id:id="",position:position="center-center",animation:animation="appear",post_content:post_content="",image_src:image_src="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",overlay_enabled:overlay_enabled=true,submitted:submitted=false,success_message:success_message=""})=>{return`
            <div id="${id}"
                 class="holler-box holler-popup holler-popup-progress-bar ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            <div class="holler-box-progress-bar-wrap">
                                <div class="holler-box-progress-bar">
                                    <div class="holler-box-progress-bar-fill ${submitted?"filled":""}"></div>
                                </div>
                            </div>
                            <div class="display-flex">
                                <div class="left image-width" style="background-image: url('${image_src}')">
                                </div>
                                <div class="right">
                                    ${__content(submitted?success_message:post_content)}
                                    ${submitted?"":form({direction:"vertical",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                                </div>
                            </div>
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling},popup_image_beside_text_top:{render:({id:id="",position:position="center-center",animation:animation="appear",title:title="",post_content:post_content="",image_src:image_src="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",overlay_enabled:overlay_enabled=true,submitted:submitted=false,success_message:success_message=""})=>{return`
            <div id="${id}" class="holler-box holler-popup holler-popup-image-beside-text-top ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal">
                            ${closeButton()}
                            ${__content(submitted?success_message:post_content)}
                            <div class="display-flex">
                                <div class="left image-width" style="background-image: url('${image_src}')">
                                </div>
                                ${submitted?"":form({direction:"vertical",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                            </div>
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling},popup_full_image_background:{render:({id:id="",position:position="center-center",animation:animation="appear",image_src:image_src="",post_content:post_content="",button_text:button_text="Subscribe",name_placeholder:name_placeholder="Name",email_placeholder:email_placeholder="Email",overlay_enabled:overlay_enabled=true,submitted:submitted=false,success_message:success_message=""})=>{return`
            <div id="${id}" class="holler-box holler-popup holler-popup-full-image-background ${submitted?"no-animation":""}">
                ${overlay_enabled?overlay():""}
                <div class="positioner ${position}">
                    <div class="animation ${animation}">
                        <div class="holler-box-modal" style="background-image: url('${image_src}')">
                            ${closeButton()}
                            ${__content(submitted?success_message:post_content)}
                            ${submitted?"":form({direction:"vertical",button_text:button_text,name_placeholder:name_placeholder,email_placeholder:email_placeholder})}
                        </div>
                        ${credit()}
                    </div>
                </div>
            </div>`},onOpen:popup=>{CommonActions.formSubmitted(popup);CommonActions.maybeDisableScrolling(popup)},onClose:CommonActions.enableScrolling}};function getScrollPercent(){var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight";return(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100}const PopupStack={stack:[],add(p){this.stack.push(p)},next(){let p=this.stack.pop();if(p){p.maybeOpen()}}};const TriggerCallbacks={on_page_load:({delay:delay=1},show)=>{setTimeout(show,delay*1e3)},element_click:({selector:selector="",trigger_multiple:trigger_multiple="once"},show,popup)=>{document.querySelectorAll(selector).forEach(el=>{el.addEventListener("click",()=>{if(trigger_multiple==="multiple"){popup._triggered=false}show()})})},scroll_detection:({depth:depth=50},show)=>{document.addEventListener("scroll",()=>{if(getScrollPercent()>=parseInt(depth)){show()}})},exit_intent:(popup,show)=>{window.addEventListener("mouseout",e=>{if(!e.toElement&&!e.relatedTarget){show()}})}};const AdvancedDisplayRules={hide_if_converted:({},popup)=>popup.getConversions()===0,hide_if_closed:({},popup)=>!Cookies.isClosed(popup.ID),show_up_to_x_times:({times:times=1},popup)=>parseInt(times)>popup.getViews(),show_after_x_page_views:({views})=>parseInt(views)<Cookies.getPageViews(),show_to_new_or_returning:({visitor:visitor="all"})=>{switch(visitor){default:case"all":return true;case"new":return Cookies.getSessions()<=1;case"returning":return Cookies.getSessions()>1}},show_on_x_devices:({device})=>{switch(device){default:return true;case"mobile":return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)<=480;case"desktop":return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)>480}}};const Popup=popup=>({...popup,id:`popup-${popup.ID}`,_triggered:false,_open:false,isOpen(){return this._open},wasTriggered(){return this._triggered},querySelector(selector=""){return document.querySelector(`#${this.id} ${selector}`)},querySelectorAll(selector=""){return document.querySelectorAll(`#${this.id} ${selector}`)},render(){try{let div=document.createElement("div");div.innerHTML=PopupTemplates[this.template].render(this);return div.firstElementChild}catch(e){maybeLog(e);return""}},addToDom(){let el=document.getElementById(this.id);if(el){el.replaceWith(this.render())}else{document.body.append(this.render())}},removeFromDom(){document.getElementById(this.id)?.remove()},converted(check=true){if(isBuilderPreview()){return}Cookies.addPopupConversion(this.ID);if(check){return apiPost(HollerBox.routes.conversion,{popup_id:this.ID,location:window.location.href,referer:document.referrer})}},viewed(){if(isBuilderPreview()){return}Cookies.addPopupView(this.ID);return apiPost(HollerBox.routes.impression,{popup_id:this.ID,location:window.location.href,referer:document.referrer})},getConversions(){return Cookies.getPopupConversions(this.ID)},getViews(){return Cookies.getPopupViews(this.ID)},cleanup(){try{PopupTemplates[this.template].cleanup(this)}catch(e){maybeLog(e)}},async open(){try{await PopupTemplates[this.template].beforeOpen(this)}catch(e){maybeLog(e)}this.addToDom();this._triggered=true;this._open=true;document.querySelectorAll(`#${this.id} .holler-box-modal-close`).forEach(el=>{el.addEventListener("click",e=>{this.close()})});try{PopupTemplates[this.template].onOpen(this)}catch(e){maybeLog(e)}this.viewed()},async close(){try{await PopupTemplates[this.template].onClose(this)}catch(e){maybeLog(e)}this.removeFromDom();this._open=false;try{await PopupTemplates[this.template].onClosed(this)}catch(e){maybeLog(e)}if(isBuilderPreview()){this.submitted=false;if(!this.isOpen()){setTimeout(()=>this.open(),1e3)}return}Cookies.addClosedPopup(this.ID);PopupStack.next()},isBlocking(){return!["fake_chat","notification_box","notification_box_with_button","notification_box_with_form"].includes(this.template)},maybeOpen(){if(this.isOpen()||this.wasTriggered()){return}for(let rule in this.advanced_rules){if(!this.advanced_rules[rule].enabled){continue}if(AdvancedDisplayRules.hasOwnProperty(rule)){if(!AdvancedDisplayRules[rule](this.advanced_rules[rule],this)){return}}}if(HollerBox.active.some(p=>p.isOpen()&&p.isBlocking())){PopupStack.add(this);return}this.open()},init(){const show=()=>this.maybeOpen();Object.keys(TriggerCallbacks).forEach(_t=>{if(this.triggers[_t]?.enabled){TriggerCallbacks[_t](this.triggers[_t],show,this)}});document.querySelectorAll(`.holler-upgrade.holler-show[data-id="${this.ID}"]`).forEach(el=>{el.addEventListener("click",e=>{e.preventDefault();popup._triggered=false;show()})})}});if(HollerBox.is_frontend){const initHollerBox=()=>{if(HollerBox._initialized){return}HollerBox._initialized=true;HollerBox.active=HollerBox.active.map(p=>Popup(p));HollerBox.active.forEach(popup=>{popup.init()});Cookies.addPageView();Cookies.maybeAddSession()};window.addEventListener("load",()=>{if(Cookies.hasAccepted()){initHollerBox();return}document.addEventListener("click",()=>{setTimeout(()=>{if(Cookies.hasAccepted()){initHollerBox()}},100)})})}function clickedIn(e,selector){var el=e.tagName?e:e.srcElement||e.target;if(el&&el.matches(selector)){return el}else{while(el=el.parentNode){if(typeof el.matches!=="undefined"&&el.matches(selector)){return el}}}return false}const isBuilderPreview=()=>HollerBox.is_builder_preview;if(isBuilderPreview()){let home=new URL(HollerBox.home_url);let popup;window.addEventListener("message",function(event){if(event.origin===window.location.origin){if(popup){popup.cleanup()}popup=Popup(event.data.popup);if(event.data.suppressAnimations){document.body.classList.add("holler-suppress-animations")}else{document.body.classList.remove("holler-suppress-animations");document.body.style.marginTop="0";document.body.style.marginBottom="0"}document.querySelectorAll(".holler-box").forEach(el=>el.remove());document.getElementById("hollerbox-builder-styles").innerHTML=popup.css;popup.open()}},false);window.addEventListener("load",()=>{document.addEventListener("click",e=>{let el=clickedIn(e,"a");if(!el){return}let url;try{url=new URL(el.href)}catch(e){maybeLog(e);return}if(url.searchParams.has("suppress_hollerbox")){return}e.preventDefault();if(url.hostname!==home.hostname||url.pathname.match(/wp-admin/)||url.pathname.match(/wp-login\.php/)){}else{url.searchParams.append("suppress_hollerbox",1);el.href=url;el.click()}});document.querySelectorAll("a").forEach(el=>{const noClick=()=>{el.classList.add("no-click");el.addEventListener("click",e=>{e.preventDefault()})};let url;try{url=new URL(el.href)}catch(e){noClick();return}if(url.hostname!==home.hostname||url.pathname.match(/wp-admin/)||url.pathname.match(/wp-login\.php/)){noClick()}else{url.searchParams.append("suppress_hollerbox",1);el.href=url}});document.querySelectorAll("form").forEach(el=>{el.addEventListener("submit",e=>{e.preventDefault();e.stopImmediatePropagation()})})})}HollerBox.templates=PopupTemplates;HollerBox._frontend={CommonActions:CommonActions,SubmitActions:SubmitActions,closeButton:closeButton,credit:credit,form:form,nameInput:nameInput,emailInput:emailInput,__content:__content,overlay:overlay,submitButton:submitButton,TriggerCallbacks:TriggerCallbacks,maybeLog:maybeLog}})();